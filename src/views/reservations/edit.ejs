<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Port Russell - Modifier une RÃ©servation</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="container">
    <div class="dashboard">
      <div class="dashboard-header">
        <h1>ğŸ“‹ Modifier la RÃ©servation</h1>
        <div class="dashboard-info">
          <span>ğŸ‘¤ <%= user.username %></span>
        </div>
      </div>
      
      <nav class="dashboard-nav">
        <ul>
          <li><a href="/dashboard">ğŸ  Tableau de bord</a></li>
          <li><a href="/catways">âš“ Catways</a></li>
          <li><a href="/reservations">ğŸ“‹ RÃ©servations</a></li>
          <li><a href="/users">ğŸ‘¥ Utilisateurs</a></li>
          <li><a href="/api/logout">ğŸšª DÃ©connexion</a></li>
        </ul>
      </nav>
      
      <div class="dashboard-content">
        <% if (error) { %>
          <div class="error"><%= error %></div>
        <% } %>
        
        <form action="/reservations/<%= reservation._id %>/edit" method="POST" style="max-width: 600px;">
          <div class="form-group">
            <label for="catwayNumber">Catway *</label>
            <select id="catwayNumber" name="catwayNumber" required style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
              <% catways.forEach(catway => { %>
                <option value="<%= catway.catwayNumber %>" <%= catway.catwayNumber === reservation.catwayNumber ? 'selected' : '' %>>
                  Catway #<%= catway.catwayNumber %> (<%= catway.catwayType %>)
                </option>
              <% }); %>
            </select>
          </div>
          
          <div class="form-group">
            <label for="clientName">Nom du client *</label>
            <input type="text" id="clientName" name="clientName" value="<%= reservation.clientName %>" required minlength="2" maxlength="100">
          </div>
          
          <div class="form-group">
            <label for="boatName">Nom du bateau *</label>
            <input type="text" id="boatName" name="boatName" value="<%= reservation.boatName %>" required minlength="2" maxlength="100">
          </div>
          
          <div class="form-group">
            <label for="startDate">Date de dÃ©but *</label>
            <input type="date" id="startDate" name="startDate" value="<%= new Date(reservation.startDate).toISOString().split('T')[0] %>" required>
          </div>
          
          <div class="form-group">
            <label for="endDate">Date de fin *</label>
            <input type="date" id="endDate" name="endDate" value="<%= new Date(reservation.endDate).toISOString().split('T')[0] %>" required>
          </div>
          
          <div style="display: flex; gap: 10px;">
            <button type="submit" class="btn">Enregistrer</button>
            <a href="/reservations" class="btn" style="background: #6c757d; text-align: center; text-decoration: none; display: inline-block;">Annuler</a>
          </div>
        </form>
      </div>
    </div>
  </div>
</body>
</html>